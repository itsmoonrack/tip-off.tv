<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>#HackDay Paris - Tip-off.tv</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">

		<!-- Le styles -->
		<link href="css/bootstrap.css" rel="stylesheet">
		<style type="text/css">
			body {
				padding-top: 60px;
				padding-bottom: 40px;
			}
			.sidebar-nav {
				padding: 0px;
			}
		</style>
		<link href="css/bootstrap-responsive.css" rel="stylesheet">

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<!-- Le fav and touch icons -->
		<link rel="shortcut icon" href="ico/favicon.ico">
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
		<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	</head>

	<body>
		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse">
						<a href="#"><img src="img/logo.png" style="height:40px;"/></a>
						<p class="navbar-text pull-right">
							Connecté en tant que <a href="#" class="navbar-link">karnoult</a>
						</p>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span3">
					<div class="well sidebar-nav">
						<h4 style="color: rgb(153, 153, 153); padding-left: 15px;">Suggestions</h4>
						<hr style="margin: 5px;" />
						<ul class="nav nav-list">
							<li class="nav-header">Aujourd'hui</li>
							
							<li><a href="#">
								Thalassa - La Guadeloupe<br />
								<span style="font-size: 9px; padding-top: 0;">France3 - 20h30</span>
							</a></li>
							<li class="nav-header">Demain</li>
							
							<li><a href="#">
								Football - France / Espagne<br />
								<span style="font-size: 9px; padding-top: 0;">TF1 - 20h50</span>
							</a></li>
							
							<li><a href="#">
								Des racines et des ailes<br />
								<span style="font-size: 9px; padding-top: 0;">France3 - 22h30</span>
							</a></li>
							
							<li><a href="#">
								J'irai dormir chez vous<br />
								<span style="font-size: 9px; padding-top: 0;">France4 - 20h50</span>
							</a></li>
							
							<li class="nav-header">Dans 4 jours</li>
							<li><a href="#">
								Hartley coeur a vif<br />
								<span style="font-size: 9px; padding-top: 0;">NRJ12 - 15h30</span>
							</a></li>
							
							<li class="nav-header">Le mois prochain</li>
							<li><a href="#">
								Travel - La Guadeloupe vue du ciel<br />
								<span style="font-size: 9px; padding-top: 0;">Voyage - 20h30</span>
							</a></li>
						</ul>
					</div><!--/.well -->
				</div><!--/span-->
				<div class="span9">
					<div class="hero-unit">
						<h3>Mais que regardes-tu espèce de trou du cul ?</h3>
					</div>
					<div class="row-fluid">
						<div class="span4" id="channel_tf1">
						</div><!--/span-->
						<div class="span4" id="channel_france2">
						</div><!--/span-->
						<div class="span4" id="channel_france3">
						</div><!--/span-->
					</div><!--/row-->
					<br /><br />
					<div class="row-fluid">
						<div class="span4" id="channel_canalplus">
						</div><!--/span-->
						<div class="span4" id="channel_france5">
						</div><!--/span-->
						<div class="span4" id="channel_m6">
						</div><!--/span-->
					</div><!--/row-->
					<br /><br />
					<div class="row-fluid">
						<div class="span4" id="channel_arte">
						</div><!--/span-->
						<div class="span4" id="channel_direct8">
						</div><!--/span-->
						<div class="span4" id="channel_w9">
						</div><!--/span-->
					</div><!--/row-->
				</div><!--/span-->
			</div><!--/row-->

			<hr>
		</div><!--/.fluid-container-->
		
		<script>
			$.getJSON('ajax/test.json', function(data) {
				var items = [];

				$.each(data.diffusion, function(key, val) {
					var colorR;
					var colorB;
					var colorG;
					if(val.show.affinity<0.5){
						colorR=255;
						colorG=Math.round(510*val.show.affinity);
						colorB=0;
					}else{
						colorR=Math.round(255-(val.show.affinity-0.5)*510);
						colorB=0;
						colorG=255;
					}
					var photo=val.show.photo;
					if(val.show.photo==""){
						photo="http://i.imgur.com/xDtLE.png"
					}
					
					var start = (new Date(val.show.start)).toLocaleTimeString()
					var end = (new Date(val.show.end)).toLocaleTimeString()
					
					$('#channel_' + val.channel).append(
						"<div style=\"width: 15px; position: absolute; margin-left:8px; margin-top:8px; \">" +
						"<div style=\"background-color: rgb(240,240,240); width: 15px; height: " + ((1 - val.show.affinity)*120) + "px;\"></div>" +
						"<div style=\"background-color: rgb("+ colorR +","+ colorG +","+ colorB +"); width: 15px; height: " + (val.show.affinity*120) + "px;\"></div>" +
						"<font size=\"1px\">" + Math.round(val.show.affinity * 100) + "%</font></div>" +
						"<img class=\"logo_shows\" src=\"" + photo + "\" />" +
						"<img class=\"logo_channel\" src=\"img/channel/channel_" + val.channel + ".png\" /><br /><br />" +
						val.show.title + "<br />" +
						"<font size=\"1px\">" + start.substring(0, start.length - 3) + " - " + start.substring(0, end.length - 3) + "</font>"
					);
					
					$('#channel_' + val.channel).click(function() {
						window.location = "show.html?id=" + val.show.id;
					});
				});
			});
		</script>
	</body>
</html>